apply plugin: 'scala'
apply plugin: 'eclipse'
apply plugin: 'war'
apply plugin: 'jetty'

buildscript {
    repositories { mavenCentral() }

    dependencies {
        classpath group: 'net.coacoas.gradle', name: 'gradle-ensime', version: '0.1.8'
    }
}

apply plugin: 'ensime'

task wrapper(type: Wrapper) {
    gradleVersion = "1.6"
}

repositories {
    mavenCentral()
}

configurations {
    bootstrap
}

dependencies {
    compile group: 'org.springframework', name: 'spring-orm', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-tx', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-context', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-core', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-web', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-webmvc', version: '4.1.2.RELEASE'
    compile group: 'org.springframework', name: 'spring-test', version: '4.1.2.RELEASE'
    compile group: 'org.springframework.data', name: 'spring-data-jpa', version: '1.7.1.RELEASE'
    compile group: 'org.resthub', name: 'springmvc-router', version: '1.2.0'
    compile group: 'org.thymeleaf', name:'thymeleaf', version: '2.0.21'
    compile group: 'org.thymeleaf', name:'thymeleaf-spring4', version: '2.1.2.RELEASE'
    compile group: 'org.hibernate.javax.persistence', name: 'hibernate-jpa-2.0-api', version: '1.0.0.Final'
    compile group: 'org.hibernate', name: 'hibernate-entitymanager', version: '4.1.4.Final'
    compile group: 'log4j', name: 'log4j', version:'1.2.16'
    compile group: 'org.slf4j', name: 'slf4j-log4j12', version: '1.6.6'
    compile group: 'org.hsqldb', name: 'hsqldb', version: '2.2.8'
    compile group: 'commons-dbcp', name: 'commons-dbcp', version: '1.4'
    compile group: 'javax.servlet', name: 'servlet-api', version: '2.5'
    compile group: 'org.scala-lang', name: 'scala-compiler', version: '2.10.0'

    testCompile group: 'junit', name: 'junit', version: '4.+'

}

test {
  testLogging {
      showStandardStreams = true
  }
}

/* This task places the Twitter Bootstrap CSS and JS into the WAR file
task explodeBootstrap(type: Copy){
  configurations.bootstrap.filter { it.toString().endsWith(".jar") }.each{
    from zipTree(it).matching{
        include 'com/twitter/**'
    }
  }
  eachFile {details ->
    details.path = details.path.replaceAll('com/twitter/', '')
  }
  into 'src/main/webapp'
}

// explodeBootstrap is our own task and we need to insert it into the task dependencies
war.dependsOn << explodeBootstrap
jettyRun.dependsOn << explodeBootstrap
*/

tasks.withType(ScalaCompile){ 
    scalaCompileOptions.additionalParameters = ['-target:jvm-1.6']
} 

stopPort = 9091
httpPort = 9090
